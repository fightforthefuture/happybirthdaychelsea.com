var BirthdayController=Composer.Controller.extend({elements:{ul:"designs",textarea:"message","span#remaining":"remaining",'input[name="name"]':"name",'input[name="address"]':"address",'input[name="city"]':"city",'input[name="state"]':"state",'input[name="zip"]':"zip",'input[name="email"]':"email",'input[name="opt_in"]':"opt_in"},events:{"click li a":"switchDesign","keyup textarea":"editMessage","change textarea":"editMessage","submit form":"submit"},selectedCard:"card1",switchDesign:function(a){a&&a.preventDefault();for(var b=0;b<this.designs.childNodes.length;b++)this.designs.childNodes[b].className="";var c=a.target.parentNode.parentNode;c.className="sel",this.selectedCard=c.id},editMessage:function(a){var b=350-this.message.value.length;this.remaining.textContent=b+" characters remaining"},submit:function(a){a.preventDefault();for(var b=!1,c=function(a){a.className="error",b=!0},d=["name","address","city","state","zip","message"],e=0;e<d.length;e++)this[d[e]].value||c(this[d[e]]);if(b)return alert("Please fill out all required fields :)");for(var f=new FormData,e=0;e<d.length;e++)f.append(d[e],this[d[e]].value);this.email.value&&f.append("email",this.email.value),this.opt_in.checked&&f.append("opt_in",1),f.append("design",this.selectedCard);var g="/happy_birthday",h=new XMLHttpRequest;return h.onreadystatechange=function(){4===h.readyState&&console.log("response:",h.response)}.bind(this),h.open("post",g,!0),h.send(f),new ShareModalController({headline:"Thanksâ€”we'll send your card!",text:"Please share this page, and consider making a small donation to help cover the cost of printing and postage! :)"}),this.el.style.display="none",document.getElementById("share").style.display="inline",!1}});new BirthdayController({el:"#amibeingdetained"}),window.DONATE_URL="https://donate.fightforthefuture.org/?tag=chelseabirthday";