var BirthdayController=Composer.Controller.extend({elements:{ul:"designs",textarea:"message","span#remaining":"remaining",'input[name="name"]':"name",'input[name="address"]':"address",'input[name="city"]':"city",'input[name="state"]':"state",'input[name="zip"]':"zip",'input[name="email"]':"email",'input[name="opt_in"]':"opt_in"},events:{"click li a":"switchDesign","keyup textarea":"editMessage","change textarea":"editMessage","submit form":"submit"},selectedCard:"card1",switchDesign:function(a){a&&a.preventDefault();for(var b=0;b<this.designs.childNodes.length;b++)this.designs.childNodes[b].className="";var c=a.target.parentNode.parentNode;c.className="sel",this.selectedCard=c.id},editMessage:function(a){var b=350-this.message.value.length;this.remaining.textContent=b+" characters remaining"},submit:function(a){a.preventDefault();var b=!1,c=function(a){a.className="error",b=!0},d=["name","address","city","state","zip","message"];if(this.message.value||c(this.message),b)return alert("Please fill out all required fields :)");for(var e=new FormData,f=0;f<d.length;f++)e.append(d[f],this[d[f]].value);this.email.value&&e.append("email",this.email.value),this.opt_in.checked&&e.append("opt_in",1),e.append("design",this.selectedCard);var g="/happy_birthday",h=new XMLHttpRequest;return h.onreadystatechange=function(){4===h.readyState&&console.log("response:",h.response)}.bind(this),h.open("post",g,!0),h.send(e),new ShareModalController({headline:"Thanksâ€”we'll send your card!",text:"Please share this page, and consider making a small donation to cover the cost of printing and postage. $4.20 lets us send 5 more cards! Whatever is'nt spent on cards will go to supporting her work from jail."}),this.el.style.display="none",document.getElementById("share").style.display="inline",!1}});new BirthdayController({el:"#amibeingdetained"}),window.DONATE_URL="https://donate.fightforthefuture.org/campaigns/birthday/page-1/?tag=chelseabirthday";